(function(c){var f=function(a,b){this.options=b;this.$element=c(a).delegate('[data-dismiss="lightbox"]',"click.dismiss.lightbox",c.proxy(this.hide,this));this.options.remote&&this.$element.find(".lightbox-body").load(this.options.remote);this.cloneSize()};f.prototype={constructor:f,toggle:function(){return this[!this.isShown?"show":"hide"]()},show:function(){var a=this,b=c.Event("show");this.$element.trigger(b);if(!this.isShown&&!b.isDefaultPrevented())this.isShown=!0,this.escape(),this.backdrop(function(){var b=
c.support.transition&&a.$element.hasClass("fade");a.$element.parent().length||a.$element.appendTo(document.body);a.$element.show();a.$element.addClass("in").attr("aria-hidden",!1);a.enforceFocus();if(b)a.$element.one(c.support.transition.end,function(){a.centerImage();a.$element.focus().trigger("shown")});else a.centerImage(),a.$element.focus().trigger("shown")})},hide:function(a){a&&a.preventDefault();a=c.Event("hide");this.$element.trigger(a);if(this.isShown&&!a.isDefaultPrevented())this.isShown=
!1,this.escape(),c(document).off("focusin.lightbox"),this.$element.removeClass("in").attr("aria-hidden",!0),c.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideLightbox()},enforceFocus:function(){var a=this;c(document).on("focusin.lightbox",function(b){a.$element[0]!==b.target&&!a.$element.has(b.target).length&&a.$element.focus()})},escape:function(){var a=this;if(this.isShown&&this.options.keyboard)this.$element.on("keypress.dismiss.lightbox, keyup.dismiss.lightbox",
function(b){b.which==27&&a.hide()});else this.isShown||this.$element.off("keypress.dismiss.lightbox, keyup.dismiss.lightbox")},hideWithTransition:function(){var a=this,b=setTimeout(function(){a.$element.off(c.support.transition.end);a.hideLightbox()},500);this.$element.one(c.support.transition.end,function(){clearTimeout(b);a.hideLightbox()})},hideLightbox:function(){this.$element.hide().trigger("hidden");this.backdrop()},removeBackdrop:function(){this.$backdrop.remove();this.$backdrop=null},backdrop:function(a){var b=
this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var d=c.support.transition&&b;this.$backdrop=c('<div class="modal-backdrop '+b+'" />').appendTo(document.body);this.$backdrop.click(this.options.backdrop=="static"?c.proxy(this.$element[0].focus,this.$element[0]):c.proxy(this.hide,this));this.$backdrop.addClass("in");d?this.$backdrop.one(c.support.transition.end,a):a()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),c.support.transition&&this.$element.hasClass("fade")?
this.$backdrop.one(c.support.transition.end,c.proxy(this.removeBackdrop,this)):this.removeBackdrop()):a&&a()},centerImage:function(){var a=0,b;this.h=this.$element.height();this.w=this.$element.width();if(this.options.resizeToFit){a=10;b=this.$element.find(".lightbox-content").find("img:first");b.data("osizew")||b.data("osizew",b.width());b.data("osizeh")||b.data("osizeh",b.height());b.data("osizew");b.data("osizeh");b.css("max-width","none");b.css("max-height","none");var d=50,e=40;this.$element.find(".lightbox-header").length>
0&&(d+=40,e+=10);b.css("max-width",c(window).width()-d);b.css("max-height",c(window).height()-e);this.w=b.width();this.h=b.height()}this.$element.css({position:"fixed",left:c(window).width()/2-this.w/2,top:c(window).height()/2-this.h/2-a});this.enforceFocus()},cloneSize:function(){this.$clone=this.$element.filter(":first").clone().css({position:"absolute",top:-2E3,display:"block",visibility:"visible",opacity:100}).removeClass("fade").appendTo("body");this.h=this.$clone.height();this.w=this.$clone.width();
this.$clone.remove();this.$element.css({position:"fixed",left:c(window).width()/2-this.w/2,top:c(window).height()/2-this.h/2})}};c.fn.lightbox=function(a){return this.each(function(){var b=c(this),d=b.data("lightbox"),e=c.extend({},c.fn.lightbox.defaults,b.data(),typeof a=="object"&&a);d||b.data("lightbox",d=new f(this,e));if(typeof a=="string")d[a]();else e.show&&d.show()})};c.fn.lightbox.defaults={backdrop:!0,keyboard:!0,show:!0,resizeToFit:!0};c.fn.lightbox.Constructor=f;c(document).on("click.lightbox.data-api",
'[data-toggle="lightbox"]',function(a){var b=c(this),d=b.attr("href"),e=c(b.attr("data-target")||d&&d.replace(/.*(?=#[^\s]+$)/,"")),d=e.data("lightbox")?"toggle":c.extend({remote:!/#/.test(d)&&d},e.data(),b.data()),f=b.attr("data-image")||!1;a.preventDefault();f&&(e.data("original-content",e.find(".lightbox-content").html()),e.find(".lightbox-content").html('<img border="0" src="'+f+'" />'));e.lightbox(d).one("hide",function(){b.focus()}).one("hidden",function(){f&&(e.find(".lightbox-content").html(e.data("original-content")),
f=void 0)})})})(window.jQuery);
